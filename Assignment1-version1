int LED_RED_GPIO=15; //led pin
int SW1_GPIO=22; //switch pin

void setup() 
{
Serial.begin(9600); //Sets the data rate in bits per second (baud) for serial data transmission
pinMode(LED_RED_GPIO, OUTPUT); //Configures pin 15 to behave as an output
pinMode(SW1_GPIO, INPUT); //Configures pin 22 to behave as an output
}

//The stream occurs unless switch is pressed
void loop() 
{
  int switchstate = digitalRead(SW1_GPIO); //local variable, holding state of switch

        if (switchstate==HIGH)
        {
          digitalWrite(LED_RED_GPIO, LOW);
          Serial.println("switch pressed, stream inactive");
        }
        
    else{
          Serial.println("switch not pressed, stream active");
          
          for (int i = 0; (i <=5 && digitalRead(SW1_GPIO) ==LOW) ; i++) //this method kind of works but it's not as responsive 
          {
            if (digitalRead(SW1_GPIO)==HIGH) break;
            Serial.println(i);
            digitalWrite(LED_RED_GPIO, HIGH); //LED is on for 1 second
            delay(1000);
            digitalWrite(LED_RED_GPIO, LOW); //LED is off for 1 second
            delay(1000);
           }
           delay(2000);
         }
}
